(this["webpackJsonpbadbank-exercise"]=this["webpackJsonpbadbank-exercise"]||[]).push([[0],{37:function(e,a,t){},45:function(e,a,t){},47:function(e,a,t){},48:function(e,a,t){"use strict";t.r(a);var s=t(1),n=t.n(s),r=t(29),c=t.n(r),l=(t(37),t(20)),i=t(2),o=t(21),d=t(26),b=t(0),j=n.a.createContext(),u={users:[{name:"abel",email:"abel@mit.edu",password:"secret",balance:100},{name:"fer",email:"fer@gmail.com",password:"secret",balance:100}],currentUser:null,success:!1,showError:!1};function m(e,a){switch(a.type){case"ADD_USER":case"UPDATE_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:a.payload});case"LOGIN":case"UPDATE_USER":return Object(i.a)(Object(i.a)({},e),{},{currentUser:a.payload});case"SET_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{success:a.payload});case"SET_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:a.payload})}}function h(e){var a=n.a.useReducer(m,u),t=Object(l.a)(a,2),s=t[0],r=t[1],c=function(e,a){return{addUser:function(t){var s=Object(o.a)(e.users);s.push(t),a({type:"ADD_USER",payload:s})},logIn:function(t){var s=e.users.find((function(e){return e.password===t.password&&e.email===t.email}));s?a({type:"LOGIN",payload:Object(i.a)({},s)}):alert("login error, check your credentials")},withdraw:function(t){var s=Object(d.findIndex)(e.users,(function(a){return a.email===e.currentUser.email})),n=Object(o.a)(e.users);n[s].balance=n[s].balance-t,a({type:"UPDATE_USERS",payload:n}),a({type:"UPDATE_USER",payload:Object(i.a)(Object(i.a)({},e.currentUser),{},{balance:e.currentUser.balance-t})})},deposit:function(t){var s=Object(d.findIndex)(e.users,(function(a){return a.email===e.currentUser.email})),n=Object(o.a)(e.users);n[s].balance=n[s].balance+t,a({type:"UPDATE_USERS",payload:n}),a({type:"UPDATE_USER",payload:Object(i.a)(Object(i.a)({},e.currentUser),{},{balance:e.currentUser.balance+t})})},setSuccess:function(e){a({type:"SET_SUCCESS",payload:e})},setError:function(e){a({type:"SET_ERROR",payload:e})}}}(s,r),h={state:s,dispatch:r,actions:c};return Object(b.jsx)(j.Provider,{value:h,children:e.children})}var O=t(3);function x(){var e=Object(s.useContext)(j).state,a=Object(O.e)();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(b.jsx)("a",{className:"navbar-brand",href:"#",children:"BadBank"}),Object(b.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(b.jsx)("span",{className:"navbar-toggler-icon"})}),Object(b.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(b.jsxs)("ul",{className:"navbar-nav",children:[Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("a",{className:"/CreateAccount/"===a.pathname?"nav-link active":"nav-link",href:"#/CreateAccount/",children:"Create Account"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("a",{className:"/login/"===a.pathname?"nav-link active":"nav-link",href:"#/login/","aria-label":"login-link",children:e.currentUser?"Profile":"Login"})}),e.currentUser&&Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("a",{className:"/deposit/"===a.pathname?"nav-link active":"nav-link",href:"#/deposit/",children:"Deposit"})}),e.currentUser&&Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("a",{className:"/withdraw/"===a.pathname?"nav-link active":"nav-link",href:"#/withdraw/",children:"Withdraw"})}),Object(b.jsx)("li",{className:"nav-item",children:Object(b.jsx)("a",{className:"/alldata/"===a.pathname?"nav-link active":"nav-link",href:"#/alldata/",children:"AllData"})})]})})]})})}var p=t(25);function v(e){return Object(b.jsxs)("div",{className:"card mb-3 "+(e.bgcolor?" bg-"+e.bgcolor:" ")+(e.txtcolor?" text-"+e.txtcolor:" text-white"),style:{maxWidth:"18rem"},children:[Object(b.jsx)("div",{className:"card-header",children:e.header}),Object(b.jsxs)("div",{className:"card-body",children:[e.title&&Object(b.jsx)("h5",{className:"card-title",children:e.title}),e.text&&Object(b.jsx)("p",{className:"card-text",children:e.text}),e.body,e.status&&Object(b.jsx)("div",{id:"createStatus",children:e.status})]})]})}function g(){return Object(b.jsx)(v,{bgcolor:"secondary",header:"Welcome to the bank",body:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{children:"For all your banking needs"}),Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:"./bankicon.png",alt:"wat",width:"100%"})})]})})}var f=t(12);function N(e){return Object(b.jsx)("div",{style:{marginTop:"10px"},className:"alert alert-danger",role:"alert",children:e.message})}function w(){var e=Object(s.useState)(!0),a=Object(l.a)(e,2),t=a[0],n=a[1],r=Object(s.useContext)(j).actions,c=Object(f.a)({initialValues:{name:"",email:"",password:""},onSubmit:function(e){console.log(e),r.addUser(Object(i.a)(Object(i.a)({},e),{},{balance:0})),alert("success!"),n(!1)},onReset:function(e){n(!0)},validate:function(e){var a={};return e.name||(a.name="Field required"),e.email||(a.email="Field required"),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Invalid Email"),e.password||(a.password="Field required"),e.password.length<8&&(a.password="Password needs to be more than 8 characters"),a}});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"CREATE ACCOUNT"}),Object(b.jsx)(v,{bgcolor:"primary",body:t?Object(b.jsxs)("form",{onSubmit:c.handleSubmit,children:["Name",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"input",className:"form-control",id:"name",name:"name",placeholder:"Enter name",onChange:c.handleChange,value:c.values.name}),Object(b.jsx)("br",{}),c.errors.name?Object(b.jsx)(N,{message:c.errors.name}):null,"Email address",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"input",className:"form-control",id:"email",name:"email",placeholder:"Enter email",onChange:c.handleChange,value:c.values.email}),Object(b.jsx)("br",{}),c.errors.email?Object(b.jsx)(N,{message:c.errors.email}):null,"Password",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Enter password",onChange:c.handleChange,value:c.values.password}),Object(b.jsx)("br",{}),c.errors.password?Object(b.jsx)(N,{message:c.errors.password}):null,Object(b.jsx)("button",{type:"submit",className:"btn btn-light",id:"submitBtn",disabled:!(c.isValid&&c.dirty),children:"Create Account"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h5",{children:"Success"}),Object(b.jsx)("button",{type:"submit",className:"btn btn-light",onClick:c.handleReset,children:"Add another account"})]})})]})}function y(){var e=Object(s.useContext)(j),a=e.state,t=e.actions,n=Object(f.a)({initialValues:{email:"",password:""},onSubmit:function(e){t.logIn(e)},validate:function(e){var a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(a.email="Username should be an email"):a.email="Field required",e.password||(a.password="Field required"),a}});return Object(b.jsx)(v,{bgcolor:"primary",header:a.currentUser?"Profile":"Login",body:a.currentUser?Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{id:"login-message",children:"Login Succesful!"}),Object(b.jsx)("br",{})," Hello,",a.currentUser.name]}):Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:n.handleSubmit,"data-testid":"login-form",children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("div",{children:"Email"}),Object(b.jsx)("input",{type:"text",className:"form-control",id:"emailField",name:"email",onChange:n.handleChange,value:n.values.email,"aria-label":"email-field"}),n.errors.email?Object(b.jsx)(N,{id:"emailError",message:n.errors.email}):null]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"pswField",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"pswField",name:"password",onChange:n.handleChange,value:n.values.password,"aria-label":"password-field"}),n.errors.password?Object(b.jsx)(N,{id:"emailError",message:n.errors.password}):null]}),Object(b.jsx)("button",{type:"submit",className:"btn btn-secondary",id:"submitBtn","aria-label":"login-button",children:"Login"})]})})})}function S(){var e=Object(s.useContext)(j),a=e.state,t=e.actions,n=Object(f.a)({initialValues:{amount:0},onSubmit:function(e){var a=parseFloat(e.amount);t.deposit(a),t.setSuccess(!0),setTimeout((function(){t.setSuccess(!1)}),3e3)},validate:function(e){var a={};return e.amount&&""!==e.amount||(a.amount="Field required"),""!==e.amount&&isNaN(parseFloat(e.amount))&&(a.amount="Just Numbers allowed"),e.amount<0&&(a.amount="Negative Numbers not allowed"),a}});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"DEPOSIT"}),Object(b.jsx)(v,{bgcolor:"secondary",body:Object(b.jsxs)(b.Fragment,{children:[a.currentUser&&Object(b.jsx)("form",{onSubmit:n.handleSubmit,"data-testid":"deposit-form",children:Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col",children:"Balance: "}),Object(b.jsx)("div",{className:"col","data-testid":"user-balance",children:a.currentUser.balance})]}),Object(b.jsxs)("div",{className:"amount-container",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("h4",{children:"Deposit Amount"})}),Object(b.jsxs)("div",{className:"fields",children:[Object(b.jsx)("input",{type:"text",className:"form-control",id:"amountField",name:"amount",onChange:n.handleChange,value:n.values.amount,"aria-label":"deposit-field"}),n.errors.amount?Object(b.jsx)(N,{id:"emailError",message:n.errors.amount}):null,Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",id:"submitBtn",disabled:!(n.isValid&&n.dirty),children:"Deposit"})]})]})]})}),!a.currentUser&&Object(b.jsx)("div",{children:"You can't see this content without being logged in."})]})}),a.success&&Object(b.jsx)("div",{className:"alert alert-success",role:"alert",children:"Succes!"})]})}function E(){var e=Object(s.useContext)(j),a=e.state,t=e.actions,n=Object(f.a)({initialValues:{amount:0},onSubmit:function(e){if(console.log(e),e.amount<=a.currentUser.balance){var s=parseFloat(e.amount);t.withdraw(s),t.setSuccess(!0),setTimeout((function(){t.setSuccess(!1)}),3e3)}else t.setError(!0),setTimeout((function(){t.setError(!1)}),3e3)},validate:function(e){var a={};return e.amount&&""!==e.amount||(a.amount="Field required"),""!==e.amount&&isNaN(parseFloat(e.amount))&&(a.amount="Just Numbers allowed"),e.amount<0&&(a.amount="Negative Numbers not allowed"),a}});return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{children:"WITHDRAW"}),Object(b.jsx)(v,{bgcolor:"secondary",body:Object(b.jsxs)(b.Fragment,{children:[a.currentUser&&Object(b.jsx)("form",{onSubmit:n.handleSubmit,"data-testid":"withdraw-form",children:Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col",children:"Balance: "}),Object(b.jsx)("div",{className:"col","data-testid":"user-balance",children:a.currentUser.balance})]}),Object(b.jsxs)("div",{className:"amount-container",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("h4",{children:"Withdraw Amount"})}),Object(b.jsxs)("div",{className:"fields",children:[Object(b.jsx)("input",{type:"text",className:"form-control",id:"amountField",name:"amount",onChange:n.handleChange,value:n.values.amount,"aria-label":"withdraw-field"}),n.errors.amount?Object(b.jsx)(N,{id:"emailError",message:n.errors.amount}):null,Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",id:"submitBtn",disabled:!(n.isValid&&n.dirty),children:"Withdraw"})]})]})]})}),!a.currentUser&&Object(b.jsx)("div",{children:"You can't see this content without being logged in."})]})}),a.success&&Object(b.jsx)("div",{className:"alert alert-success",role:"alert",children:"Succes!"}),a.error&&Object(b.jsx)(N,{message:"transaction failed"})]})}function U(){var e=Object(s.useContext)(j).state;return Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{scope:"col",children:"Email"}),Object(b.jsx)("th",{scope:"col",children:"Name"}),Object(b.jsx)("th",{scope:"col",children:"Password"}),Object(b.jsx)("th",{scope:"col",children:"Balance"})]})}),Object(b.jsx)("tbody",{children:e.users.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.email}),Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.password}),Object(b.jsx)("td",{children:e.balance})]})}))})]})}t(44),t(45);var C=function(){return Object(b.jsx)(p.a,{children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)(x,{}),Object(b.jsx)(O.a,{path:"/",exact:!0,component:g}),Object(b.jsx)(O.a,{path:"/CreateAccount/",component:w}),Object(b.jsx)(O.a,{path:"/login/",component:y}),Object(b.jsx)(O.a,{path:"/deposit/",component:S}),Object(b.jsx)(O.a,{path:"/withdraw/",component:E}),Object(b.jsx)(O.a,{path:"/alldata/",component:U})]})})},F=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,49)).then((function(a){var t=a.getCLS,s=a.getFID,n=a.getFCP,r=a.getLCP,c=a.getTTFB;t(e),s(e),n(e),r(e),c(e)}))};t(46),t(47);c.a.render(Object(b.jsx)(h,{children:Object(b.jsx)(C,{})}),document.getElementById("root")),F()}},[[48,1,2]]]);
//# sourceMappingURL=main.d6d90b46.chunk.js.map